(this["webpackJsonpmem-mgr-sim"]=this["webpackJsonpmem-mgr-sim"]||[]).push([[0],{20:function(e,t,s){},21:function(e,t,s){},22:function(e,t,s){},28:function(e,t,s){"use strict";s.r(t);var n=s(0),a=s(2),r=s.n(a),c=s(9),i=s.n(c),l=(s(20),s(6)),o=s(1),m=s(4),d=s(10),u=s(11),h=s(14),j=s(13),b=(s(21),s(22),s(8)),x=s.n(b),p=s(12),g=s.n(p),f={physicalMemSize:64,pageSize:4,availFrames:16,memorySet:!0,errorMsg:void 0,currTime:0,running:!1,playing:!1,finished:!1,logs:[],pageTables:{},memory:new Array(16),processes:[{processId:"email",numBytes:12,numFrames:3,timeUnits:5,timeRan:0,status:"Waiting"},{processId:"excel",numBytes:32,numFrames:8,timeUnits:3,timeRan:0,status:"Waiting"},{processId:"browser",numBytes:36,numFrames:9,timeUnits:8,timeRan:0,status:"Waiting"},{processId:"music",numBytes:16,numFrames:4,timeUnits:12,timeRan:0,status:"Waiting"},{processId:"IO",numBytes:26,numFrames:7,timeUnits:4,timeRan:0,status:"Waiting"}]},v={physicalMemSize:0,pageSize:0,availFrames:0,memorySet:!1,errorMsg:void 0,currTime:0,running:!1,playing:!1,finished:!1,logs:[],pageTables:{},memory:[],processes:[]},y=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(){var e;Object(d.a)(this,s);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={physicalMemSize:void 0,pageSize:void 0,availFrames:void 0,memorySet:!1,hoverId:void 0,hoverMemoryId:void 0,pageTables:{},memory:[],processes:[],errorMsg:void 0,currTime:0,running:!1,playing:!1,finished:!1,logs:[],processId:"",numBytes:0,timeUnits:0},e.timer=void 0,e.onAddProcess=function(){var t=e.state,s=t.pageSize,n=t.processes,a=t.processId,r=t.numBytes,c=t.timeUnits;c<=0?e.setState({errorMsg:"Process must run for at least 1 unit of time"}):r<=0?e.setState({errorMsg:"Process must be greater than 0 bytes"}):a?e.setState({processes:[].concat(Object(m.a)(n),[{processId:a,numBytes:r,numFrames:Math.ceil(r/s),timeUnits:c,timeRan:0,status:"Waiting"}]),processId:"",numBytes:0,timeUnits:0}):e.setState({errorMsg:"Process missing process id"})},e.onDemo=function(){e.timer&&clearTimeout(e.searchTimer),e.timer=void 0,e.setState(Object.assign(e.state,x.a.cloneDeep(f)))},e.onReset=function(){e.timer&&clearTimeout(e.searchTimer),e.timer=void 0,e.setState(Object.assign(e.state,x.a.cloneDeep(v)))},e.onPlay=function(){e.setState({running:!0,playing:!0,finished:!1}),e.timerSystemClock()},e.onStop=function(){e.timer&&clearTimeout(e.searchTimer),e.timer=void 0,e.setState({running:!1,playing:!1})},e.onFileLoaded=function(t){var s=e.state.pageSize,n=t.map((function(e){return{processId:e[0].toString(),numBytes:parseInt(e[1]),numFrames:Math.ceil(parseInt(e[1])/s),timeUnits:parseInt(e[2]),timeRan:0,status:"Waiting"}}));e.setState({processes:n})},e.timerSystemClock=function(){e.timer&&clearTimeout(e.searchTimer),e.timer=void 0,e.timer=setTimeout((function(){e.advanceSystemClock()&&e.timerSystemClock()}),1800)},e.advanceSystemClock=function(){var t=e.state,s=t.currTime,n=t.memory,a=t.pageTables,r=t.logs,c=e.advanceProcesses(),i=Object(o.a)(c,4),l=i[0],d=i[1],u=i[2],h=i[3],j=e.deallocateMemory(n,u,a);n=j[0],a=j[1];var b=e.allocateMemory(n,d,a);n=b[0],a=b[1];var x=l.every((function(e){return"Finished"===e.status})),p=!!e.state.playing&&!x;return(0!==s||e.state.processes.some((function(e){return"Waiting"!==e.status})))&&s++,r=[].concat(Object(m.a)(r),Object(m.a)(u.map((function(e){var t=Object(o.a)(e,2),n=t[0],a=t[1];return{msg:"Deallocating ".concat(a," frames for ").concat(n),time:s}}))),Object(m.a)(d.map((function(e){var t=Object(o.a)(e,2),n=t[0],a=t[1];return{msg:"Allocating ".concat(a," frames for ").concat(n),time:s}})))),e.setState({availFrames:h,currTime:s,finished:x,logs:r,memory:n,pageTables:a,playing:p,processes:l}),p},e.advanceProcesses=function(){var t=e.state.availFrames,s=[],n=[];return[e.state.processes.map((function(e){return"Running"===e.status?(e.timeRan+=1,e.timeRan>=e.timeUnits&&(e.status="Finished",t+=e.numFrames,n.push([e.processId,e.numFrames])),Object(l.a)({},e)):"Waiting"===e.status&&e.numFrames<=t?(t-=e.numFrames,s.push([e.processId,e.numFrames]),Object(l.a)(Object(l.a)({},e),{},{status:"Running"})):e})),s,n,t]},e.memoryBlocks=function(){for(var t=e.state.memory,s=null,n=0,a=[],r=0;r<t.length;r++){var c=t[r];null===s&&(s=c),c!==s&&(a.push({processId:s,start:n,end:r-1}),n=r),s=c}return a.push({processId:s,start:n,end:t.length-1}),a},e}return Object(u.a)(s,[{key:"allocateMemory",value:function(e,t,s){if(0===t.length)return[e,s];for(var n=0,a=Object(o.a)(t[n],2),r=a[0],c=a[1],i=0,l=0,m=0;m<e.length;m++)if(!e[m]&&(s[r]||(s[r]=[]),s[r].push({page:l,frame:m}),l++,e[m]=r,++i===c)){if(++n===t.length)break;var d=Object(o.a)(t[n],2);r=d[0],c=d[1],l=0,i=0}return[e,s]}},{key:"deallocateMemory",value:function(e,t,s){if(0===t.length)return[e,s];var n=t.map((function(e){var t=Object(o.a)(e,2),s=t[0];t[1];return s}));n.forEach((function(e){delete s[e]}));for(var a=0;a<e.length;a++)n.includes(e[a])&&(e[a]=void 0);return[e,s]}},{key:"render",value:function(){var e=this,t=this.state,s=t.currTime,a=t.errorMsg,r=t.hoverId,c=t.hoverMemoryId,i=t.logs,l=t.physicalMemSize,m=t.pageSize,d=t.pageTables,u=t.playing,h=t.processId,j=t.processes,b=t.numBytes,x=t.running,p=t.memorySet,f=t.timeUnits,v=t.availFrames,y=this.memoryBlocks(),O=j.filter((function(e){return"Running"===e.status})),N=l/m,w=Math.round(v/N*500),S=0===O.length?"rounded-t-2xl":"",M="Logical-Avail"===c?"":"overflow-hidden";return Object(n.jsx)("div",{className:"App",children:Object(n.jsxs)("div",{className:"flex flex-col w-full",children:[Object(n.jsx)("div",{className:"flex flex-row w-full",children:Object(n.jsxs)("div",{className:"flex flex-col w-full justify-center content-center items-center bg-yellow-300 p-8 m-4 shadow",children:[Object(n.jsx)("h1",{className:"font-sans font-medium text-xl m-2",children:"Paging Memory Management Simulator"}),Object(n.jsx)("p",{className:"mt-8",children:"Simulates logical and physical memory usage for sequences of processes using a paging memory management scheme."}),Object(n.jsx)("a",{href:"https://github.com/tlskins/memory-mgmt-simulator",className:"underline text-blue-700 mt-4",children:"https://github.com/tlskins/memory-mgmt-simulator"})]})}),Object(n.jsx)("div",{className:"flex flex-row w-full bg-indigo-300 p-8",children:Object(n.jsxs)("div",{className:"flex flex-col w-full justify-center content-center items-center",children:[Object(n.jsxs)("h2",{className:"font-sans m-2",children:["Total Memory:",p?Object(n.jsxs)("span",{className:"rounded-lg bg-yellow-300 text-lg shadow px-2 py-1 m-2",children:[" ",l," "]}):Object(n.jsx)("input",{type:"text",className:"mx-2 rounded p-1 w-20",value:l,onChange:function(t){var s=Math.trunc(parseFloat(t.target.value));e.setState({physicalMemSize:isNaN(s)?0:s})}}),"bytes"]}),Object(n.jsxs)("h2",{className:"font-sans m-2",children:["Page Size:",p?Object(n.jsxs)("span",{className:"rounded-lg bg-yellow-300 text-lg shadow px-2 py-1 m-2",children:[" ",m," "]}):Object(n.jsx)("input",{type:"text",className:"mx-2 rounded p-1 w-20",value:m,onChange:function(t){var s=Math.trunc(parseFloat(t.target.value));e.setState({pageSize:isNaN(s)?0:s})}}),"bytes"]}),p&&Object(n.jsxs)("h2",{className:"font-sans m-2",children:["Available Pages:",Object(n.jsxs)("span",{className:"rounded-lg bg-yellow-300 text-lg shadow px-2 py-1 m-2",children:[" ",v," "]})]}),Object(n.jsxs)("div",{className:"flex flex-row",children:[!p&&Object(n.jsx)("button",{className:"rounded-lg shadow bg-teal-300 hover:bg-blue-300 font-sans font-semibold underline w-20 px-2 py-1 m-6",onClick:function(){if(l<=0)e.setState({errorMsg:"Physical memory must be greater than 0"});else if(m<=0)e.setState({errorMsg:"Page size must be greater than 0"});else if(m%2===0){var t=l/m;e.setState({memorySet:!0,memory:new Array(t),totalFrames:t,availFrames:t})}else e.setState({errorMsg:"Page size must be a multiple of 2"})},children:"Enter"}),!x&&Object(n.jsx)("button",{className:"rounded-lg shadow bg-teal-300 hover:bg-blue-300 font-sans font-semibold underline w-20 px-2 py-1 m-6",onClick:this.onDemo,children:"Demo"}),Object(n.jsx)("button",{className:"rounded-lg shadow bg-orange-300 hover:bg-blue-300 font-sans font-semibold underline w-20 px-2 py-1 m-6",onClick:this.onReset,children:"Reset"}),p&&!u&&Object(n.jsx)("button",{className:"rounded-lg shadow bg-green-400 hover:bg-blue-300 font-sans font-semibold underline w-20 px-2 py-1 m-6",onClick:this.onPlay,children:"Play"}),u&&Object(n.jsx)("button",{className:"rounded-lg shadow bg-green-400 hover:bg-red-400 font-sans font-semibold underline w-20 px-2 py-1 m-6",onClick:this.onStop,children:"Stop"})]}),!x&&p&&Object(n.jsxs)("div",{className:"flex flex-col my-4",children:[Object(n.jsx)("div",{children:Object(n.jsx)(g.a,{cssClass:"flex flex-col",cssInputClass:"bg-white border",onFileLoaded:this.onFileLoaded,onError:function(e){return console.log("csv err",e)},parserOptions:{header:!1,dynamicTyping:!0,skipEmptyLines:!0}})}),Object(n.jsxs)("p",{children:["Upload processes via CSV file with no header row",Object(n.jsx)("br",{}),"Columns: (1) process id, (2) size in bytes, (3) time units"]})]})]})}),a&&Object(n.jsx)("div",{className:"flex w-full justify-center content-center items-center my-4 py-12 bg-orange-400 cursor-pointer hover:bg-orange-600",onClick:function(){return e.setState({errorMsg:void 0})},children:Object(n.jsx)("h2",{className:"flex-row text-xl",children:a})}),Object(n.jsxs)("div",{className:"flex flex-row",children:[Object(n.jsxs)("div",{className:"flex-col w-3/12 p-8",children:[Object(n.jsx)("h2",{className:"text-xl underline",children:"FIFO Process Queue"}),p&&!x&&Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:"flex flex-row m-2",children:[Object(n.jsx)("p",{className:"m-2 w-32",children:"Process Id"}),Object(n.jsx)("input",{type:"text",className:"p-2 bg-indigo-300 rounded",value:h,onChange:function(t){return e.setState({processId:t.target.value})}})]}),Object(n.jsxs)("div",{className:"flex flex-row m-2",children:[Object(n.jsx)("p",{className:"m-2 w-32",children:"Size (Bytes)"}),Object(n.jsx)("input",{type:"text",className:"p-2 bg-indigo-300 rounded",value:b,onChange:function(t){var s=Math.trunc(parseFloat(t.target.value));e.setState({numBytes:isNaN(s)?0:s})}})]}),Object(n.jsxs)("div",{className:"flex flex-row m-2",children:[Object(n.jsx)("p",{className:"m-2 w-32",children:"Units of Time"}),Object(n.jsx)("input",{type:"text",className:"p-2 bg-indigo-300 rounded",value:f,onChange:function(t){var s=Math.trunc(parseFloat(t.target.value));e.setState({timeUnits:isNaN(s)?0:s})}})]}),Object(n.jsx)("button",{className:"m-2 p-2 w-32 rounded-lg shadow bg-teal-300 hover:bg-blue-300 rounded",onClick:this.onAddProcess,children:"Add Process"}),Object(n.jsx)("button",{className:"m-2 p-2 w-32 rounded-lg shadow bg-teal-300 hover:bg-blue-300 rounded",onClick:function(){0!==j.length?e.setState({running:!0},e.advanceSystemClock):e.setState({errorMsg:"Must have at least 1 process to run"})},children:"Run"})]}),j.length>0&&Object(n.jsxs)("table",{className:"table-auto mt-4 w-full",children:[Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{className:"px-2 py1",children:"#"}),Object(n.jsx)("th",{className:"px-2 py-1",children:"Id"}),Object(n.jsx)("th",{className:"px-2 py-1",children:"Size (bytes)"}),Object(n.jsx)("th",{className:"px-2 py-1",children:"Total Time"}),Object(n.jsx)("th",{className:"px-2 py-1",children:"Run Time"}),Object(n.jsx)("th",{className:"px-2 py-1",children:"Status"})]}),j.map((function(e,t){var s="bg-gray-400";return"Running"===e.status&&(s="bg-green-400"),"Finished"===e.status&&(s="bg-blue-300"),Object(n.jsxs)("tr",{className:"flex-row rounded w-24 p-2 m-2 ".concat(s),children:[Object(n.jsxs)("td",{className:"border px-2 py-1",children:[" ",t+1," "]}),Object(n.jsxs)("td",{className:"border px-2 py-1",children:[" ",e.processId," "]}),Object(n.jsxs)("td",{className:"border px-2 py-1",children:[" ",e.numBytes," "]}),Object(n.jsxs)("td",{className:"border px-2 py-1",children:[" ",e.timeUnits," "]}),Object(n.jsxs)("td",{className:"border px-2 py-1",children:[" ",e.timeRan," "]}),Object(n.jsxs)("td",{className:"border px-2 py-1",children:[" ",e.status," "]})]},t)}))]}),p&&x&&Object(n.jsx)("div",{children:Object(n.jsxs)("div",{className:"flex flex-row m-2",children:[Object(n.jsxs)("p",{className:"m-2 w-32",children:["Time ",s," "]}),Object(n.jsx)("button",{className:"m-2 p-2 w-32 rounded-lg shadow bg-teal-300 hover:bg-blue-300 rounded",onClick:this.advanceSystemClock,children:"Advance Time"})]})})]}),Object(n.jsxs)("div",{className:"flex-col w-3/12 p-8 justify-center content-center items-center",children:[Object(n.jsx)("h2",{className:"text-xl underline",children:"Logical Memory"}),O.map((function(t,s){var a=s===O.length-1,r=0===v,i=Math.round(t.numFrames/N*500),l=0===s?"rounded-t-2xl":"";r&&a&&(l="rounded-b-2xl"),r&&a||(l+=" border-b-2 border-white");var o="Logical-Process-".concat(s);return c!==o&&(l+=" overflow-hidden"),Object(n.jsx)("div",{style:{height:i},className:"flex flex-row bg-blue-300 p-2 mx-2 ".concat(l," shadow-lg justify-center content-center items-center"),onMouseEnter:function(){return e.setState({hoverMemoryId:o})},onMouseLeave:function(){return e.setState({hoverMemoryId:void 0})},children:Object(n.jsxs)("div",{className:"flex flex-col font-medium text-justify",children:[Object(n.jsxs)("div",{children:["Process: ",Object(n.jsx)("span",{className:"text-white",children:t.processId})]}),Object(n.jsxs)("div",{children:["Size: ",Object(n.jsx)("span",{className:"text-white",children:t.numBytes})]}),Object(n.jsxs)("div",{children:["Pages: ",Object(n.jsx)("span",{className:"text-white",children:t.numFrames})]})]})},s)})),v>0&&Object(n.jsx)("div",{style:{height:w},className:"flex flex-row bg-gray-400 p-2 mx-2 ".concat(S," rounded-b-2xl shadow-lg justify-center content-center items-center ").concat(M),onMouseEnter:function(){return e.setState({hoverMemoryId:"Logical-Avail"})},onMouseLeave:function(){return e.setState({hoverMemoryId:void 0})},children:Object(n.jsxs)("div",{className:"flex flex-col font-medium text-justify",children:[Object(n.jsxs)("div",{children:["Size: ",Object(n.jsx)("span",{className:"text-white",children:v*m})]}),Object(n.jsxs)("div",{children:["Pages: ",Object(n.jsx)("span",{className:"text-white",children:v})]})]})})]}),Object(n.jsxs)("div",{className:"flex-col w-3/12 p-8",children:[Object(n.jsx)("h2",{className:"text-xl underline",children:"Page Tables"}),Object.entries(d).map((function(t,s){var a=Object(o.a)(t,2),c=a[0],i=a[1];return Object(n.jsxs)("div",{className:"rounded bg-yellow-300 shadow-lg p-2 m-2",onMouseEnter:function(){return e.setState({hoverId:c})},children:[Object(n.jsxs)("h2",{className:"font-semibold my-2",children:["Process: ",Object(n.jsx)("span",{className:"text-blue-600 underline",children:c})]}),r===c&&i.map((function(e,t){return Object(n.jsxs)("div",{children:[Object(n.jsxs)("span",{className:"mx-2",children:["Page: ",e.page]}),Object(n.jsxs)("span",{className:"mx-2",children:["Frame: ",e.frame]})]},t)}))]},s)}))]}),Object(n.jsxs)("div",{className:"flex-col w-3/12 p-8",children:[Object(n.jsx)("h2",{className:"text-xl underline",children:"Physical Memory"}),p&&y.map((function(t,s){var a=t.start,r=t.end,i=t.processId,l=s===y.length-1,o=r-a+1,d=Math.round(o/N*500),u=0===s?"rounded-t-2xl":"";l&&(u+=" rounded-b-2xl"),l||(u+=" border-b-2 border-white");var h="Physical-Avail-".concat(s);return c!==h&&(u+=" overflow-hidden"),Object(n.jsx)("div",{style:{height:d},className:"flex flex-row bg-".concat(i?"blue-300":"gray-400"," ").concat(u," p-2 mx-2 shadow-lg justify-center content-center items-center"),onMouseEnter:function(){return e.setState({hoverMemoryId:h})},onMouseLeave:function(){return e.setState({hoverMemoryId:void 0})},children:Object(n.jsxs)("div",{className:"flex flex-col font-medium text-justify",children:[i&&Object(n.jsxs)("div",{children:["Process: ",Object(n.jsx)("span",{className:"text-white",children:i})]}),Object(n.jsxs)("div",{children:["Size: ",Object(n.jsx)("span",{className:"text-white",children:o*m})]}),Object(n.jsxs)("div",{children:["Frames: ",Object(n.jsx)("span",{className:"text-white",children:o})]})]})},s)}))]})]}),Object(n.jsx)("div",{className:"flex flex-row justify-center content-center items-center",children:Object(n.jsxs)("div",{className:"flex-col p-8",children:[Object(n.jsx)("h2",{className:"text-xl underline",children:"Memory Allocation Logs"}),i.reverse().map((function(e){return Object(n.jsxs)("p",{children:["@ ",e.time," - ",e.msg]})}))]})})]})})}}]),s}(a.Component),O=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,29)).then((function(t){var s=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,c=t.getTTFB;s(e),n(e),a(e),r(e),c(e)}))};i.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(y,{})}),document.getElementById("root")),O()}},[[28,1,2]]]);
//# sourceMappingURL=main.4ffacd5d.chunk.js.map